import{a as I,j as e,b as ie,R as Le,C as Ae}from"./react-three-fiber-Dqb0OOWd.js";import{L as Q,T as ee,u as te,O as Ge,c as Re}from"./react-three-drei-DbEqLZqY.js";import{u as R,a as O}from"./react-spring-Dux0Pijc.js";import{r as Oe,F as _e,a9 as re,e as U,c as me,G as oe,g as Fe,ax as le,aL as ke,aM as ce,aN as z,t as ne,a6 as Be,as as Ue,z as He}from"./three-DH4V4xUF.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))f(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const g of l.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&f(g)}).observe(document,{childList:!0,subtree:!0});function c(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function f(r){if(r.ep)return;r.ep=!0;const l=c(r);fetch(r.href,l)}})();const u={DIAMETER_RANGE:{min:100,max:250,step:10},LENGTH_RANGE:{min:50,max:500,step:1},OPENING_RANGE:{min:10,max:200,step:1},WALL_THICKNESS:3,MM_TO_SCENE_UNITS:200,MM_TO_INCHES:25.4,DEFAULT_VALUES:{diameter:150,length:200,lidColor:"#ff0088",openingDiameter:89}},Ve={ambient:{intensity:1.8},key:{position:[4,6,2],intensity:2,shadowMapSize:4096,shadowCamera:{near:.1,far:20,left:-5,right:5,top:5,bottom:-5}},fill:{position:[-3,4,3],intensity:1,color:"#f0f8ff"},rim:{position:[1,2,-4],intensity:.8,color:"#fffacd"},top:{position:[0,8,0],intensity:2.5,color:"#ffffff",decay:2}},ze={position:[0,0,3.15],fov:50},T={glass:{color:"#ffffff",transparent:!0,opacity:.15,transmission:1,thickness:.15,roughness:0,metalness:0,clearcoat:1,clearcoatRoughness:0,envMapIntensity:1,ior:1.52,reflectivity:0,side:"DoubleSide"},pump:{roughness:.3,metalness:.6},metal:{color:"#c5c9ca",metalness:.95,roughness:.15,envMapIntensity:2,reflectivity:1,clearcoat:.3,clearcoatRoughness:.05,sheen:.2,sheenColor:"#ffffff",emissive:"#080808",emissiveIntensity:.02}},$e=()=>{const o=new URLSearchParams(window.location.search);return{diameter:parseInt(o.get("diameter"))||u.DEFAULT_VALUES.diameter,length:parseInt(o.get("length"))||u.DEFAULT_VALUES.length,lidColor:o.get("color")||u.DEFAULT_VALUES.lidColor,openingDiameter:parseInt(o.get("opening"))||u.DEFAULT_VALUES.openingDiameter,showDimensions:o.get("dimensions")!=="false",openingStyle:o.get("openingStyle")||"2-Stage"}},Ye=o=>{const n=new URLSearchParams;n.set("diameter",o.outerDiameter.toString()),n.set("length",o.tubeLength.toString()),n.set("color",o.lidColor),n.set("opening",o.openingDiameter.toString()),n.set("dimensions",o.showDimensions.toString()),n.set("openingStyle",o.openingStyle);const c=`${window.location.pathname}?${n.toString()}`;window.history.replaceState({},"",c)},We=()=>{const o=$e(),[n,c]=I.useState(o.diameter),[f,r]=I.useState(o.length),[l,g]=I.useState(o.lidColor),[x,S]=I.useState(o.openingDiameter),[m,i]=I.useState(o.showDimensions),[a,d]=I.useState(!1),[E,j]=I.useState("#000000"),[p,C]=I.useState(o.openingStyle),[v,b]=I.useState(!1),[h,_]=I.useState(0),D={outerDiameter:n,tubeLength:f,lidColor:l,openingDiameter:x,showDimensions:m,exploded:a,backgroundColor:E,openingStyle:p,showBanana:v};return I.useEffect(()=>{p==="2-Stage"&&x>n-37?S(Math.max(u.OPENING_RANGE.min,n-37)):p!=="2-Stage"&&x>n&&S(n)},[n,x,p]),I.useEffect(()=>{if(p==="Straight Inner"){const w=n-6-6.6;S(Math.max(u.OPENING_RANGE.min,w))}else if(p==="Straight Outer"){const w=n-6-12.6-16.4;S(Math.max(u.OPENING_RANGE.min,w))}},[p,n]),I.useEffect(()=>{Ye(D)},[n,f,l,x,m,p]),{config:{...D,openingDimensionOffset2stg:h},setters:{setOuterDiameter:c,setTubeLength:r,setLidColor:g,setOpeningDiameter:S,setShowDimensions:i,setExploded:d,setBackgroundColor:j,setOpeningStyle:C,setShowBanana:b,setOpeningDimensionOffset2stg:_}}},ue=o=>(o/u.MM_TO_INCHES).toFixed(2),t=(o,n=u.MM_TO_SCENE_UNITS)=>o/n,H=o=>`${o}mm (${ue(o)}")`,de=o=>`Ø ${o}mm (${ue(o)}")`,he=({outerDiameter:o,setOuterDiameter:n,tubeLength:c,setTubeLength:f,lidColor:r,setLidColor:l,openingDiameter:g,setOpeningDiameter:x,showDimensions:S,setShowDimensions:m,exploded:i,setExploded:a,backgroundColor:d,setBackgroundColor:E,openingStyle:j,setOpeningStyle:p,showBanana:C,setShowBanana:v,isMobile:b=!1})=>e.jsxs("div",{className:"control-panel",role:"region","aria-label":"3D Model Configuration Controls",children:[e.jsxs("div",{className:"control-group",children:[e.jsxs("label",{htmlFor:"diameter-slider",className:"control-label",children:["Cylinder Diameter: ",H(o)]}),e.jsxs("div",{className:"slider-container",children:[e.jsx("button",{className:"control-button",onClick:()=>n(Math.max(u.DIAMETER_RANGE.min,o-u.DIAMETER_RANGE.step)),"aria-label":"Decrease diameter",children:"−"}),e.jsx("input",{id:"diameter-slider",type:"range",min:u.DIAMETER_RANGE.min,max:u.DIAMETER_RANGE.max,step:u.DIAMETER_RANGE.step,value:o,onChange:h=>n(parseInt(h.target.value)),className:"slider-input","aria-label":`Cylinder diameter: ${H(o)}`}),e.jsx("button",{className:"control-button",onClick:()=>n(Math.min(u.DIAMETER_RANGE.max,o+u.DIAMETER_RANGE.step)),"aria-label":"Increase diameter",children:"+"})]})]}),e.jsxs("div",{className:"control-group",children:[e.jsxs("label",{htmlFor:"length-slider",className:"control-label",children:["Cylinder Length: ",H(c)]}),e.jsxs("div",{className:"slider-container",children:[e.jsx("button",{className:"control-button",onClick:()=>f(Math.max(u.LENGTH_RANGE.min,c-u.LENGTH_RANGE.step)),"aria-label":"Decrease length",children:"−"}),e.jsx("input",{id:"length-slider",type:"range",min:u.LENGTH_RANGE.min,max:u.LENGTH_RANGE.max,step:u.LENGTH_RANGE.step,value:c,onChange:h=>f(parseInt(h.target.value)),className:"slider-input","aria-label":`Cylinder length: ${H(c)}`}),e.jsx("button",{className:"control-button",onClick:()=>f(Math.min(u.LENGTH_RANGE.max,c+u.LENGTH_RANGE.step)),"aria-label":"Increase length",children:"+"})]})]}),e.jsxs("div",{className:"control-group",children:[e.jsx("label",{htmlFor:"opening-style",className:"control-label",children:"Opening Style:"}),e.jsxs("select",{id:"opening-style",value:j,onChange:h=>p(h.target.value),className:"select-input","aria-label":"Select opening style",children:[e.jsx("option",{value:"2-Stage",children:"E0 | 2-Stage"}),e.jsx("option",{value:"Straight Inner",children:"E1 | Straight Inner"}),e.jsx("option",{value:"Straight Outer",children:"E2 | Straight Outer"})]})]}),j==="2-Stage"&&e.jsxs("div",{className:"control-group",children:[e.jsxs("label",{htmlFor:"opening-slider",className:"control-label",children:["Opening Diameter: ",H(g)]}),e.jsxs("div",{className:"slider-container",children:[e.jsx("button",{className:"control-button",onClick:()=>x(Math.max(u.OPENING_RANGE.min,g-u.OPENING_RANGE.step)),"aria-label":"Decrease opening diameter",children:"−"}),e.jsx("input",{id:"opening-slider",type:"range",min:u.OPENING_RANGE.min,max:Math.min(u.OPENING_RANGE.max,o-37),step:u.OPENING_RANGE.step,value:g,onChange:h=>x(parseInt(h.target.value)),className:"slider-input","aria-label":`Opening diameter: ${H(g)}`}),e.jsx("button",{className:"control-button",onClick:()=>x(Math.min(Math.min(u.OPENING_RANGE.max,o-37),g+u.OPENING_RANGE.step)),"aria-label":"Increase opening diameter",children:"+"})]})]}),e.jsxs("div",{className:"control-group",children:[e.jsx("label",{htmlFor:"color",className:"control-label",children:"Color:"}),e.jsx("input",{id:"color",type:"color",value:r,onChange:h=>l(h.target.value),className:"color-input","aria-label":"Select lid color"})]}),e.jsxs("div",{className:"control-group",children:[e.jsx("label",{htmlFor:"background-color",className:"control-label",children:"Background:"}),e.jsx("input",{id:"background-color",type:"color",value:d,onChange:h=>E(h.target.value),className:"color-input","aria-label":"Select background color"})]}),e.jsx("div",{className:"control-group",children:e.jsxs("label",{htmlFor:"show-dimensions",className:"checkbox-group control-label",children:[e.jsx("input",{id:"show-dimensions",type:"checkbox",checked:S,onChange:h=>m(h.target.checked),className:"checkbox-input"}),"Show Dimensions"]})}),e.jsx("div",{className:"control-group",children:e.jsxs("label",{htmlFor:"exploded-view",className:"checkbox-group control-label",children:[e.jsx("input",{id:"exploded-view",type:"checkbox",checked:i,onChange:h=>a(h.target.checked),className:"checkbox-input"}),"Exploded View"]})}),e.jsx("div",{className:"control-group",children:e.jsxs("label",{htmlFor:"banana-scale",className:"checkbox-group control-label",children:[e.jsx("input",{id:"banana-scale",type:"checkbox",checked:C,onChange:h=>v(h.target.checked),className:"checkbox-input"}),"Banana for Scale"]})})]}),Xe=()=>{const{ambient:o,key:n,fill:c,rim:f,top:r}=Ve;return e.jsxs(e.Fragment,{children:[e.jsx("ambientLight",{intensity:o.intensity}),e.jsx("directionalLight",{position:n.position,intensity:n.intensity,castShadow:!0,"shadow-mapSize-width":n.shadowMapSize,"shadow-mapSize-height":n.shadowMapSize,"shadow-camera-near":n.shadowCamera.near,"shadow-camera-far":n.shadowCamera.far,"shadow-camera-left":n.shadowCamera.left,"shadow-camera-right":n.shadowCamera.right,"shadow-camera-top":n.shadowCamera.top,"shadow-camera-bottom":n.shadowCamera.bottom}),e.jsx("directionalLight",{position:c.position,intensity:c.intensity,color:c.color}),e.jsx("directionalLight",{position:f.position,intensity:f.intensity,color:f.color}),e.jsx("pointLight",{position:r.position,intensity:r.intensity,color:r.color,decay:r.decay})]})};class qe extends Oe{constructor(n){super(n)}load(n,c,f,r){const l=this,g=new _e(this.manager);g.setPath(this.path),g.setResponseType("arraybuffer"),g.setRequestHeader(this.requestHeader),g.setWithCredentials(this.withCredentials),g.load(n,function(x){try{c(l.parse(x))}catch(S){r?r(S):console.error(S),l.manager.itemError(n)}},f,r)}parse(n){function c(m){const i=new DataView(m),a=32/8*3+32/8*3*3+16/8,d=i.getUint32(80,!0);if(80+32/8+d*a===i.byteLength)return!0;const j=[115,111,108,105,100];for(let p=0;p<5;p++)if(f(j,i,p))return!1;return!0}function f(m,i,a){for(let d=0,E=m.length;d<E;d++)if(m[d]!==i.getUint8(a+d))return!1;return!0}function r(m){const i=new DataView(m),a=i.getUint32(80,!0);let d,E,j,p=!1,C,v,b,h,_;for(let N=0;N<70;N++)i.getUint32(N,!1)==1129270351&&i.getUint8(N+4)==82&&i.getUint8(N+5)==61&&(p=!0,C=new Float32Array(a*3*3),v=i.getUint8(N+6)/255,b=i.getUint8(N+7)/255,h=i.getUint8(N+8)/255,_=i.getUint8(N+9)/255);const D=84,w=50,P=new re,A=new Float32Array(a*3*3),G=new Float32Array(a*3*3),F=new U;for(let N=0;N<a;N++){const k=D+N*w,Y=i.getFloat32(k,!0),V=i.getFloat32(k+4,!0),B=i.getFloat32(k+8,!0);if(p){const M=i.getUint16(k+48,!0);(M&32768)===0?(d=(M&31)/31,E=(M>>5&31)/31,j=(M>>10&31)/31):(d=v,E=b,j=h)}for(let M=1;M<=3;M++){const W=k+M*12,L=N*3*3+(M-1)*3;A[L]=i.getFloat32(W,!0),A[L+1]=i.getFloat32(W+4,!0),A[L+2]=i.getFloat32(W+8,!0),G[L]=Y,G[L+1]=V,G[L+2]=B,p&&(F.setRGB(d,E,j,me),C[L]=F.r,C[L+1]=F.g,C[L+2]=F.b)}}return P.setAttribute("position",new oe(A,3)),P.setAttribute("normal",new oe(G,3)),p&&(P.setAttribute("color",new oe(C,3)),P.hasColors=!0,P.alpha=_),P}function l(m){const i=new re,a=/solid([\s\S]*?)endsolid/g,d=/facet([\s\S]*?)endfacet/g,E=/solid\s(.+)/;let j=0;const p=/[\s]+([+-]?(?:\d*)(?:\.\d*)?(?:[eE][+-]?\d+)?)/.source,C=new RegExp("vertex"+p+p+p,"g"),v=new RegExp("normal"+p+p+p,"g"),b=[],h=[],_=[],D=new Fe;let w,P=0,A=0,G=0;for(;(w=a.exec(m))!==null;){A=G;const F=w[0],N=(w=E.exec(F))!==null?w[1]:"";for(_.push(N);(w=d.exec(F))!==null;){let V=0,B=0;const M=w[0];for(;(w=v.exec(M))!==null;)D.x=parseFloat(w[1]),D.y=parseFloat(w[2]),D.z=parseFloat(w[3]),B++;for(;(w=C.exec(M))!==null;)b.push(parseFloat(w[1]),parseFloat(w[2]),parseFloat(w[3])),h.push(D.x,D.y,D.z),V++,G++;B!==1&&console.error("THREE.STLLoader: Something isn't right with the normal of face number "+j),V!==3&&console.error("THREE.STLLoader: Something isn't right with the vertices of face number "+j),j++}const k=A,Y=G-A;i.userData.groupNames=_,i.addGroup(k,Y,P),P++}return i.setAttribute("position",new le(b,3)),i.setAttribute("normal",new le(h,3)),i}function g(m){return typeof m!="string"?new TextDecoder().decode(m):m}function x(m){if(typeof m=="string"){const i=new Uint8Array(m.length);for(let a=0;a<m.length;a++)i[a]=m.charCodeAt(a)&255;return i.buffer||i}else return m}const S=x(n);return c(S)?r(S):l(g(n))}}const $=({position:o,rotation:n,color:c})=>e.jsxs("mesh",{position:o,rotation:n,children:[e.jsx("coneGeometry",{args:[.02,.06,12]}),e.jsx("meshBasicMaterial",{color:c})]}),Ke=({outerDiameter:o,length:n,showDimensions:c,exploded:f,openingDiameter:r,openingStyle:l,openingDimensionOffset2stg:g})=>{if(!c)return null;const x=t(o)/2,S=t(n),m=t(r)/2,i="white",a=3,d=.05,E=S/2+.15,j=E+t(40),p=R({position:f?[0,j,0]:[0,E,0],config:{mass:1,tension:200,friction:25}}),C=()=>{switch(l){case"2-Stage":return g+.175||.375;case"Straight Inner":return .275;case"Straight Outer":return .175;default:return 0}},v=-S/2-C(),b=v-t(40),h=R({position:f?[0,b,0]:[0,v,0],config:{mass:1,tension:200,friction:25}});return e.jsxs("group",{children:[e.jsx(Q,{points:[[x+.15,-S/2+.01,0],[x+.15,S/2-.01,0]],color:i,lineWidth:a}),e.jsx($,{position:[x+.15,-S/2+.03,0],rotation:[0,0,Math.PI],color:i}),e.jsx($,{position:[x+.15,S/2-.03,0],rotation:[0,0,2*Math.PI],color:i}),e.jsx(ee,{position:[x+.2,0,0],rotation:[0,0,Math.PI/2],fontSize:d,color:i,anchorX:"center",anchorY:"middle",children:H(n)}),e.jsxs(O.group,{position:p.position,children:[e.jsx(Q,{points:[[-x+.01,0,0],[x-.01,0,0]],color:i,lineWidth:a}),e.jsx($,{position:[-x+.03,0,0],rotation:[0,0,Math.PI/2],color:i}),e.jsx($,{position:[x-.03,0,0],rotation:[0,0,-Math.PI/2],color:i}),e.jsx(ee,{position:[0,.05,0],fontSize:d,color:i,anchorX:"center",anchorY:"middle",children:de(o)})]}),e.jsxs(O.group,{position:h.position,children:[e.jsx(Q,{points:[[-m+.01,0,0],[m-.01,0,0]],color:i,lineWidth:a}),e.jsx($,{position:[-m+.03,0,0],rotation:[0,0,Math.PI/2],color:i}),e.jsx($,{position:[m-.03,0,0],rotation:[0,0,-Math.PI/2],color:i}),e.jsx(ee,{position:[0,-.05,0],fontSize:d,color:i,anchorX:"center",anchorY:"middle",children:de(r)})]})]})},Ze=({outerDiameter:o,length:n,lidColor:c,openingDiameter:f,showDimensions:r,exploded:l,openingStyle:g,showBanana:x,openingDimensionOffset2stg:S,setOpeningDimensionOffset2stg:m})=>{const i=t(o)/2,a=i-t(u.WALL_THICKNESS),d=t(n),E=t(f)/2,{scene:j}=te("/barbed.glb"),{scene:p}=te("/bulkhead.glb"),{scene:C}=te("/bulkhead_nut.glb"),v=ie(qe,"/banana.stl"),b=ie(He,"/studio_small_03.jpg");Le.useEffect(()=>{b&&(b.mapping=ke,b.colorSpace=me)},[b]);const h=[0,d/2+t(12.25),-a+t(20.5)],_=t(75),D=[h[0],h[1]+_,h[2]],w=R({position:l?D:h,config:{mass:1,tension:200,friction:25}}),P=[0,d/2+t(2.575),-a+t(20.5)],A=t(60),G=[P[0],P[1]+A,P[2]],F=R({position:l?G:P,config:{mass:1,tension:200,friction:25}}),N=[0,d/2+t(-2.45),-a+t(20.5)],k=t(25.5),Y=[N[0],N[1]+k,N[2]],V=R({position:l?Y:N,config:{mass:1,tension:200,friction:25}}),B=[0,d/2+t(6),0],M=t(40),W=[B[0],B[1]+M,0],L=R({position:l?W:B,config:{mass:1,tension:200,friction:25}}),X=[0,d/2,0],pe=M,ge=[X[0],X[1]+pe,X[2]],fe=R({position:l?ge:X,config:{mass:1,tension:200,friction:25}}),q=[0,d/2-t(5.5),0],se=t(20),xe=[q[0],q[1]+se,q[2]],be=R({position:l?xe:q,config:{mass:1,tension:200,friction:25}}),K=[0,-d/2+t(5.5),0],Se=se,we=[K[0],K[1]-Se,K[2]],Ne=R({position:l?we:K,config:{mass:1,tension:200,friction:25}}),ye=[0,-d/2,0],Ee=t(40),je=[0,-d/2-Ee,0],Ie=R({position:l?je:ye,config:{mass:1,tension:200,friction:25}}),Z=new ce;Z.absarc(0,0,i,0,Math.PI*2,!1);const ae=new z;ae.absarc(0,0,a,0,Math.PI*2,!0),Z.holes.push(ae);const J={depth:d,bevelEnabled:!1,curveSegments:64},Ce={depth:t(6),bevelEnabled:!1,curveSegments:64},Me=()=>{const s=new z;return s.moveTo(a-t(6),0),s.absarc(a-t(6),-t(3),t(3),Math.PI/2,0,!0),s.lineTo(a-t(3),-t(8)),s.absarc(a,-t(8),t(3),Math.PI,3*Math.PI/2,!1),s.lineTo(a,0),s.lineTo(i,0),s.lineTo(i,t(3)),s.absarc(i-t(3),t(3),t(3),0,Math.PI/2),s.getPoints()},Pe=()=>{const s=new ce;s.absarc(0,0,a,0,Math.PI*2,!1);const y=new z;return y.absarc(0,-a+t(20.5),t(10.1),0,Math.PI*2,!0),s.holes.push(y),s},ve=()=>{const s=new z;return s.moveTo(a,0),s.lineTo(a,t(11)),s.absarc(a-t(1.5),t(8),t(3),Math.PI/2,Math.PI,!1),s.lineTo(a-t(3),t(0)),s.lineTo(E,s.currentPoint.y-(s.currentPoint.x-E)),s.lineTo(E,s.currentPoint.y-t(7.5)),s.arc(t(7.5),0,t(7.5),Math.PI,3*Math.PI/2,!1),m&&m(Math.abs(s.currentPoint.y)),s.lineTo(s.currentPoint.x+t(3),s.currentPoint.y),s.arc(0,t(7.5),t(7.5),3*Math.PI/2,0,!1),s.lineTo(s.currentPoint.x,s.currentPoint.y+t(7.5)),s.lineTo(i,t(-3)),s.lineTo(i,0),s.lineTo(a,0),s.getPoints()},De=()=>{const s=new z;return s.moveTo(a,0),s.lineTo(a,t(11)),s.absarc(a-t(1.5),t(8),t(3),Math.PI/2,Math.PI,!1),s.lineTo(a-t(3),t(-22.8727-2.6)),s.absarc(a+t(4.5),t(-22.8727-2.6),t(7.5),Math.PI,3*Math.PI/2,!1),s.lineTo(a+t(7.5),t(-22.8727-2.6-7.5)),s.absarc(a+t(7.5-1.45),t(-22.8727-2.6),t(7.5),3*Math.PI/2,0,!1),s.absarc(a-t(3+1.45),t(-22.8727-2.6),t(18),0,Math.PI/4,!1),s.absarc(i+t(18),0,t(18),5*Math.PI/4,Math.PI,!0),s.lineTo(a,0),s.getPoints()},Te=()=>{const s=new z;return s.moveTo(a,0),s.lineTo(a,t(11)),s.absarc(a-t(1.5),t(5.5),t(5.5),Math.PI/2,Math.PI,!1),s.lineTo(a-t(4.5+2.5),t(5.03)),s.absarc(a-t(4.5+7.5+2.5),t(5.03),t(7.5),0,5*Math.PI/3,!0),s.absarc(a-t(7.5),t(-8.34012),t(7.5),2*Math.PI/3,3*Math.PI/2,!1),s.lineTo(a-t(4.5),t(-8.34012-7.5)),s.absarc(a-t(4.5),t(-8.34012),t(7.5),3*Math.PI/2,0,!1),s.lineTo(a+t(3),0),s.lineTo(a,0),s.getPoints()};return e.jsxs("group",{children:[e.jsx(O.primitive,{object:j,scale:5,position:w.position,ref:s=>{s&&s.traverse(y=>{y.isMesh&&(y.material=new ne({...T.metal,sheenColor:new U(T.metal.sheenColor),emissive:new U(T.metal.emissive),envMap:b}),y.geometry.computeVertexNormals(),y.castShadow=!0,y.receiveShadow=!0)})}}),e.jsx(O.primitive,{object:p,scale:5,position:F.position,ref:s=>{s&&s.traverse(y=>{y.isMesh&&(y.material=new ne({...T.metal,sheenColor:new U(T.metal.sheenColor),emissive:new U(T.metal.emissive),envMap:b}),y.geometry.computeVertexNormals(),y.castShadow=!0,y.receiveShadow=!0)})}}),e.jsx(O.primitive,{object:C,scale:5,position:V.position,ref:s=>{s&&s.traverse(y=>{y.isMesh&&(y.material=new ne({...T.metal,sheenColor:new U(T.metal.sheenColor),emissive:new U(T.metal.emissive),envMap:b}),y.geometry.computeVertexNormals(),y.castShadow=!0,y.receiveShadow=!0)})}}),e.jsxs(O.mesh,{position:fe.position,castShadow:!0,receiveShadow:!0,children:[e.jsx("latheGeometry",{args:[Me(),J.curveSegments]}),e.jsx("meshStandardMaterial",{color:c,envMap:b,...T.pump})]}),e.jsxs(O.mesh,{rotation:[Math.PI/2,0,0],position:L.position,castShadow:!0,receiveShadow:!0,children:[e.jsx("extrudeGeometry",{args:[Pe(),Ce]}),e.jsx("meshPhysicalMaterial",{color:c,envMap:b,...T.pump})]}),e.jsxs(O.mesh,{rotation:[Math.PI/2,0,0],position:be.position,castShadow:!0,receiveShadow:!0,children:[e.jsx("torusGeometry",{args:[a,t(3.5/2),32,64]}),e.jsx("meshStandardMaterial",{color:"#303030",roughness:.9,metalness:0,emissive:"#000000",emissiveIntensity:.02,envMap:b})]}),e.jsxs("mesh",{rotation:[Math.PI/2,0,0],position:[0,d/2,0],castShadow:!0,receiveShadow:!0,children:[e.jsx("extrudeGeometry",{args:[Z,J]}),e.jsx("meshPhysicalMaterial",{envMap:b,...T.glass,side:Be})]}),e.jsxs(O.mesh,{rotation:[Math.PI/2,0,0],position:Ne.position,castShadow:!0,receiveShadow:!0,children:[e.jsx("torusGeometry",{args:[a,t(3.5/2),32,64]}),e.jsx("meshStandardMaterial",{color:"#303030",roughness:.9,metalness:0,emissive:"#000000",emissiveIntensity:.02,envMap:b})]}),e.jsxs(O.mesh,{position:Ie.position,castShadow:!0,receiveShadow:!0,children:[e.jsx("latheGeometry",{args:[g==="2-Stage"?ve():g==="Straight Inner"?De():Te(),J.curveSegments]}),e.jsx("meshStandardMaterial",{wireframe:!1,color:c,side:Ue,envMap:b,...T.pump})]}),x&&e.jsxs("mesh",{position:[0,t(15),t(-21)],rotation:[0,0,Math.PI/6.5],scale:.005,castShadow:!0,receiveShadow:!0,children:[e.jsx("bufferGeometry",{attach:"geometry",...v}),e.jsx("meshStandardMaterial",{color:"#FFD700",roughness:.6,metalness:.7,envMap:b})]}),e.jsx(Ke,{outerDiameter:o,length:n,showDimensions:r,exploded:l,openingDiameter:f,openingStyle:g,openingDimensionOffset2stg:S})]})};function Je(){const{config:o,setters:n}=We(),[c,f]=I.useState(window.innerWidth<=768),[r,l]=I.useState(c);return I.useEffect(()=>{const g=()=>{f(window.innerWidth<=768)};return window.addEventListener("resize",g),()=>window.removeEventListener("resize",g)},[]),e.jsxs("main",{className:"app-layout",children:[e.jsx("span",{className:"sr-only",children:"3D Tube Configuration Tool - Use the control panel to adjust tube parameters and view the results in the 3D visualization"}),c&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"mobile-toggle-button",onClick:()=>l(!r),"aria-expanded":!r,"aria-controls":"mobile-control-panel",children:r?"⚙️ Controls":"✕ Hide"}),!r&&e.jsx("div",{className:"mobile-controls-overlay",id:"mobile-control-panel",children:e.jsx(he,{outerDiameter:o.outerDiameter,setOuterDiameter:n.setOuterDiameter,tubeLength:o.tubeLength,setTubeLength:n.setTubeLength,lidColor:o.lidColor,setLidColor:n.setLidColor,openingDiameter:o.openingDiameter,setOpeningDiameter:n.setOpeningDiameter,showDimensions:o.showDimensions,setShowDimensions:n.setShowDimensions,exploded:o.exploded,setExploded:n.setExploded,backgroundColor:o.backgroundColor,setBackgroundColor:n.setBackgroundColor,openingStyle:o.openingStyle,setOpeningStyle:n.setOpeningStyle,showBanana:o.showBanana,setShowBanana:n.setShowBanana,isMobile:c})})]}),!c&&e.jsx("aside",{className:"control-sidebar","aria-label":"3D Model Controls",children:e.jsx(he,{outerDiameter:o.outerDiameter,setOuterDiameter:n.setOuterDiameter,tubeLength:o.tubeLength,setTubeLength:n.setTubeLength,lidColor:o.lidColor,setLidColor:n.setLidColor,openingDiameter:o.openingDiameter,setOpeningDiameter:n.setOpeningDiameter,showDimensions:o.showDimensions,setShowDimensions:n.setShowDimensions,exploded:o.exploded,setExploded:n.setExploded,backgroundColor:o.backgroundColor,setBackgroundColor:n.setBackgroundColor,openingStyle:o.openingStyle,setOpeningStyle:n.setOpeningStyle,showBanana:o.showBanana,setShowBanana:n.setShowBanana,isMobile:c})}),e.jsx("section",{className:"canvas-container","aria-label":"3D Tube Visualization",children:e.jsxs(Ae,{shadows:!0,camera:ze,style:{background:o.backgroundColor,width:"100%",height:"100%"},children:[e.jsx(Xe,{}),e.jsx(Ze,{outerDiameter:o.outerDiameter,length:o.tubeLength,lidColor:o.lidColor,openingDiameter:o.openingDiameter,showDimensions:o.showDimensions,exploded:o.exploded,openingStyle:o.openingStyle,showBanana:o.showBanana,openingDimensionOffset2stg:o.openingDimensionOffset2stg,setOpeningDimensionOffset2stg:n.setOpeningDimensionOffset2stg}),e.jsx(Ge,{})]})})]})}Re.createRoot(document.getElementById("root")).render(e.jsx(I.StrictMode,{children:e.jsx(Je,{})}));
